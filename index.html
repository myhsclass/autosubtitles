<!DOCTYPE html>
<html>
<head>
  <meta charset="utf8">
  <title>Camera Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="css/style.css" type="text/css" media="all">
</head>
<body>
  
  <!-- カメラ映像 -->
  <video id="video" muted></video>

  <script>
    //<video id="videoFrame">の幅と高さを設定。タグの後でないと動かないのでここに書いている
    const videoWidth = window.innerWidth/10;
    const videoHeight = window.innerHeight/10;
    console.log("videoWidth :: "+videoWidth)
    console.log("videoHeight :: "+videoHeight)
    const video = document.getElementById("video");

    //.setAttributeは要素の属性を追加。幅と高さを追加
   
// {exact: "environment"}
// "user"

const videoSetting = {
  audio: false,
  video: {
    width:videoWidth,
    height:videoHeight,
    frameRate: 12,
    facingMode: {exact: "environment"}
  }
};

const promise = navigator.mediaDevices.getUserMedia(videoSetting);

promise.then(successCallback)
  .catch(errorCallback);

function successCallback(stream) {
  video.srcObject = stream;
  alert("width :: "+window.innerWidth+" height :: "+window.innerHeight);
  video.setAttribute("width",videoWidth*10);
  video.setAttribute("height",videoHeight*10);
  video.setAttribute("autoplay",true);
};

function errorCallback(err) {
  alert(err);
};

    </script>
  <div id="speechText">ここに字幕が表示されます</div>
  <script src="js/myScript.js"></script>
</body>
</html>
